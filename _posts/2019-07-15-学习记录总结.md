---
layout:     post   				    # 使用的布局（不需要改）
title:      2019-07-15-学习记录总结			# 标题 
subtitle:   深入理解计算机系统五六章知识点小结 #副标题
date:       2019-07-15 				# 时间
author:     GSJ 						# 作者
header-img: img/post-bg-2015.jpg 	#这篇文章标题背景图片
catalog: true 						# 是否归档
tags:								#标签
    - 学习
---

# Keep 
# 第五章：优化程序性能的几种方式 <br>
 ## 消除循环的低效率 <br> 
 代码移动：将计算结果不会改变的计算移动循环外部。<br>
 ## 减少过程调用 <br>
 过程调用会带来开销（维护返回地址、局部变量等），而且妨碍大多数形式的程序优化。<br>
 重写代码，避免循坏调用过程。<br>
 ## 消除不必要的内存引用 <br>
 对于频繁读写的内存数据，应定义局部变量减少内存访问，局部变量（立即数）存储在寄存器中，<br>
 读写速度快。<br>
 ## 循环展开 <br>
 循环展开是一种程序变换，通过增加每次迭代计算的元素数量，减少循环的迭代次数。<br>
 ## 提高并行性 <br>
 ### 多个累积变量 <br>
 对于一个可结合和可交换的合并运算（整数加法或乘法），可通过将一组合并运算分割成两个或<br>
 更多的部分，并在最后合并结果来提高性能。<br>
 ## 理解内存性能 <br>
 #### 加载的性能 <br>
 加载操作的性能既依赖于流水线能力，也依赖于加载单元的延迟。<br>
 # 存储的性能 <br>
 
存储操作：将寄存器值写入内存。<br>
读写相关：一个内存读的结果依赖于 一个最近的内存写。<br>
存储缓冲区：包含已经被发射到存储单元而又未完成存储操作的地址和数据，使得一系列存储操作不必 <br>
等待每个操作都更新高速缓存就能够执行。当一个加载操作发生，若缓冲区中包含待加载地址的缓冲数据， <br> 
则将该缓冲数据读取作为加载结果 <br>
# 第六章：存储器结构 <br>
## 存储技术 <br>
### 随机访问存储器（RAM）<br>
静态RAM（SRAM） ：双稳态存储单元，抗干扰性强，用于高速缓存器。读写快、造价高、功耗高。<br>
动态RAM（DRAM）：将每个位存储为电容的充电，对干扰非常敏感。读写慢、造价低、功耗低。 <br>
### 磁盘存储 <br>
磁盘容量由记录密度、磁道密度和面密度决定。容量的计算公式如下：<br>
磁盘容量=字节数扇区×平均扇区数磁道×磁道数表面×表面数盘片×盘片数磁盘磁盘容量= <br> 
扇区字节数×磁道平均扇区数​×表面磁道数​×盘片表面数​×磁盘盘片数​ <br>
### 固态硬盘 <br>
固态硬盘（Solid State Disk），是一种基于闪存的存储技术。读SSD比写快。大约100 000次重复写后，<br> 
块就会损坏。<br>
一个闪存有B个块的序列组成，每个块有P页组成，页的大小约512Bytes ~ 4KB，块是由32 ~ 128页组成，<br>
块的大小为16KB ~ 512KB。<br>
数据以页为单位进行读写，只有在一页全部擦除之后才可写这一页，若修改某页中的内容，则必须将该页复制到新块，<br> 
而且擦除时间较为耗时，故写入时间比读取时间长。<br>
## 局部性 <br>
局部性，指倾向于引用邻近于其他最近引用过的数据项的数据项，或最近引用过的数据项本身。<br>
时间局部性：被引用过一次的内存位置可能在不远的将来再次被引用。<br>
空间局部性：若一个内存位置被引用一次，则程序很可能在不远的将来引用附近的一个内存位置。<br>
## 存储器层次结构 <br>
![](https://img-blog.csdn.net/2018100713545710?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NpbmF0XzM0MDcyMzgx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70) <br>
## 存储器结构层次中的缓存 <br>
### 缓存命中。<br>
当程序需要第k+1层的数据对象d时，系统首先在缓存层（k层）查找对象d，若k层查找到d，则缓存命中。<br>
### 缓存不命中。<br>
若未在缓存层找到所需数据对象，则缓存不命中（cache miss）。此时，k层缓存从k+1层取出包含d的数据块，<br> 
根据缓存策略覆盖/驱逐现存块。如随机替换、最少使用等策略。<br>
### 缓存不命中种类 <br>
冷缓存（k层缓存为空）不命中，称为强制性不命中或冷不命中。<br>
冲突不命中，有限制性放置策略引起的。如k+1层分为数据块1-16，k层可缓存4块并采用放置策略为i mod 4。<br>
若CPU循环访问数据块0和8，由于数据块0和8需放置在k层同一数据块，造成每次引用都不命中。<br>
### 缓存管理 <br>
高速缓存L1-3由硬件逻辑管理，虚拟内存由操作系统软件和CPU上的地址翻译硬件共同管理。<br>
